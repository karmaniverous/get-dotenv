<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Shell execution behavior | @karmaniverous/get-dotenv</title><meta name="description" content="Documentation for @karmaniverous/get-dotenv"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">@karmaniverous/get-dotenv</a><div id="tsd-toolbar-links"><a href="https://github.com/karmaniverous/get-dotenv">GitHub</a></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="Guides.html">Guides</a></li><li><a href="" aria-current="page">Shell execution behavior</a></li></ul></div><div class="tsd-panel tsd-typography"><p>Scope and precedence:</p>
<p>This page documents the root shell behavior controlled by the host’s global <code>--shell</code> (and optional root <code>scripts</code>). Plugins normally rely on the root shell setting; a rare per‑script override may be honored by CLI‑driven plugins when a script entry uses the object form <code>{ cmd, shell }</code>. For subprocess patterns across plugins (including expansion timing, child env composition, capture, quoting, and safety), see Plugins → Executing shell commands: ./plugins/exec.md.</p>
<h1 id="shell-execution-behavior" class="tsd-anchor-link">Shell execution behavior<a href="#shell-execution-behavior" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>get-dotenv executes commands via <a href="https://github.com/sindresorhus/execa" target="_blank" class="external">execa</a> and normalizes shell behavior across platforms.</p>
<h2 id="resolution-rules" class="tsd-anchor-link">Resolution rules<a href="#resolution-rules" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><code>--shell</code> (or <code>shell: true</code>): use a normalized default shell
<ul>
<li>POSIX: <code>/bin/bash</code></li>
<li>Windows: <code>powershell.exe</code></li>
</ul>
</li>
<li><code>--shell &lt;string&gt;</code>: use the provided shell (e.g., <code>/bin/zsh</code>)</li>
<li><code>--shell-off</code> (or <code>shell: false</code>): execute without a shell (plain execa)</li>
<li>Scripts table overrides: an individual script may specify <code>shell</code> to override the global setting for that script.</li>
</ul>
<h2 id="plain-vs-shell-mode" class="tsd-anchor-link">Plain vs shell mode<a href="#plain-vs-shell-mode" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Plain (no shell): safer for simple commands; execa parses arguments as JS. Pipes, redirects, and globbing are not available unless the command itself implements them.</li>
<li>Shell mode: the specified shell parses the command string, enabling pipes, redirects, aliases, and shell builtins. Quoting and escaping must follow the shell’s rules.</li>
</ul>
<h2 id="examples" class="tsd-anchor-link">Examples<a href="#examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Use the default shell:</p>
<pre><code class="bash"><span class="hl-0">getdotenv</span><span class="hl-1"> </span><span class="hl-5">--</span><span class="hl-1"> </span><span class="hl-2">env</span><span class="hl-1"> </span><span class="hl-2">VAR=</span><span class="hl-9">1</span>
</code><button type="button">Copy</button></pre>

<p>Disable shell parsing entirely:</p>
<pre><code class="bash"><span class="hl-0">getdotenv</span><span class="hl-1"> </span><span class="hl-5">--shell-off</span><span class="hl-1"> </span><span class="hl-2">cmd</span><span class="hl-1"> </span><span class="hl-2">echo</span><span class="hl-1"> </span><span class="hl-2">hello</span>
</code><button type="button">Copy</button></pre>

<p>Force a specific shell:</p>
<pre><code class="bash"><span class="hl-0">getdotenv</span><span class="hl-1"> </span><span class="hl-5">--shell</span><span class="hl-1"> </span><span class="hl-2">/bin/zsh</span><span class="hl-1"> </span><span class="hl-2">cmd</span><span class="hl-1"> </span><span class="hl-2">&#39;echo &quot;quoted with zsh&quot;&#39;</span>
</code><button type="button">Copy</button></pre>

<p>Script-level shell override (example <code>getdotenv.config.json</code>):</p>
<pre><code class="json"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-11">&quot;scripts&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-11">&quot;bash-only&quot;</span><span class="hl-1">: { </span><span class="hl-11">&quot;cmd&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;echo $SHELL &amp;&amp; echo OK&quot;</span><span class="hl-1">, </span><span class="hl-11">&quot;shell&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;/bin/bash&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">    </span><span class="hl-11">&quot;plain&quot;</span><span class="hl-1">: { </span><span class="hl-11">&quot;cmd&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;node -v&quot;</span><span class="hl-1">, </span><span class="hl-11">&quot;shell&quot;</span><span class="hl-1">: </span><span class="hl-5">false</span><span class="hl-1"> }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Then:</p>
<pre><code class="bash"><span class="hl-0">getdotenv</span><span class="hl-1"> </span><span class="hl-2">cmd</span><span class="hl-1"> </span><span class="hl-2">bash-only</span><br/><span class="hl-0">getdotenv</span><span class="hl-1"> </span><span class="hl-2">cmd</span><span class="hl-1"> </span><span class="hl-2">plain</span>
</code><button type="button">Copy</button></pre>

<h2 id="quoting-tips" class="tsd-anchor-link">Quoting tips<a href="#quoting-tips" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>POSIX shells: prefer single quotes when possible; escape <code>$</code> for literal dollar signs.</li>
<li>PowerShell: double-quotes perform interpolation; single quotes are literal.</li>
</ul>
<h2 id="nested-cli-behavior" class="tsd-anchor-link">Nested CLI behavior<a href="#nested-cli-behavior" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Nested <code>getdotenv</code> invocations inherit parent CLI options and the loaded dotenv context via <code>process.env.getDotenvCliOptions</code> (JSON). The shell resolution and scripts table continue to apply within nested commands using the same rules.</p>
<h2 id="environment-normalization" class="tsd-anchor-link">Environment normalization<a href="#environment-normalization" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Child processes receive a normalized environment composed from the parent and the current dotenv context:</p>
<ul>
<li>Composition: <code>{ ...process.env, ...ctx.dotenv }</code></li>
<li>Normalization: a single helper drops undefined values and improves cross-platform behavior (e.g., TMP/TEMP coherence and HOME fallback on Windows; TMPDIR population on POSIX).</li>
<li>This keeps subprocess behavior consistent across platforms and surfaces.</li>
</ul>
<h2 id="capture-cifriendly" class="tsd-anchor-link">Capture (CI‑friendly)<a href="#capture-cifriendly" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>By default, child process output is streamed live (<code>stdio: 'inherit'</code>). For deterministic logs in CI or tests, enable capture:</p>
<ul>
<li>Flag: <code>--capture</code></li>
<li>Env: <code>GETDOTENV_STDIO=pipe</code></li>
</ul>
<p>When capture is enabled, stdout/stderr are buffered and re‑emitted after the child completes. Batch and AWS forwarding also honor capture, ensuring stable output ordering in automated environments. Live streaming remains available by omitting the flag/env (the default).</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#shell-execution-behavior"><span>Shell execution behavior</span></a><ul><li><a href="#resolution-rules"><span>Resolution rules</span></a></li><li><a href="#plain-vs-shell-mode"><span>Plain vs shell mode</span></a></li><li><a href="#examples"><span>Examples</span></a></li><li><a href="#quoting-tips"><span>Quoting tips</span></a></li><li><a href="#nested-cli-behavior"><span>Nested <wbr/>CLI behavior</span></a></li><li><a href="#environment-normalization"><span>Environment normalization</span></a></li><li><a href="#capture-cifriendly"><span>Capture (<wbr/>CI‑friendly)</span></a></li></ul></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/karmaniverous/get-dotenv" class="tsd-nav-link">GitHub</a></nav><nav class="tsd-navigation"><a href="../modules.html">@karmaniverous/get-dotenv</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
